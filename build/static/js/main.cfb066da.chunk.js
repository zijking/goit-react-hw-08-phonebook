(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{123:function(e,t,n){},124:function(e,t,n){},129:function(e,t,n){e.exports={contactList:"Contacts_contactList__HpZdI",item:"Contacts_item__nZKOG",contactItem:"Contacts_contactItem__3EB81"}},130:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(10),i=n.n(o),s=n(33),l=n(11),u=n(54),d=n(14),j=n(29),b=n(77),f=n.n(b),O=n(78),h=n.n(O),m=n(8),p=n(17),g=n(20),v=n.n(g),x=n(28),w=n(24),C=n.n(w);C.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var k,y,_={addContacts:Object(d.c)("contacts/addContacts",function(){var e=Object(x.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.post("/contacts",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),deleteContacts:Object(d.c)("contacts/deleteContacts",function(){var e=Object(x.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.delete("/contacts/".concat(t));case 2:return e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),loadContacts:Object(d.c)("contacts/loadContacts",Object(x.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.get("/contacts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))))},N={changeFilter:Object(d.b)("contacts/changeFilter")},U=Object(d.d)([],(k={},Object(m.a)(k,_.addContacts.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(u.a)(e),[n])})),Object(m.a)(k,_.deleteContacts.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(m.a)(k,_.loadContacts.fulfilled,(function(e,t){return t.payload})),k)),L=Object(d.d)("",Object(m.a)({},N.changeFilter,(function(e,t){return t.payload}))),F=Object(d.d)(!1,(y={},Object(m.a)(y,_.addContacts.pending,(function(){return!0})),Object(m.a)(y,_.addContacts.fulfilled,(function(){return!1})),Object(m.a)(y,_.addContacts.rejected,(function(){return!1})),Object(m.a)(y,_.deleteContacts.pending,(function(){return!0})),Object(m.a)(y,_.deleteContacts.fulfilled,(function(){return!1})),Object(m.a)(y,_.deleteContacts.rejected,(function(){return!1})),Object(m.a)(y,_.loadContacts.pending,(function(){return!0})),Object(m.a)(y,_.loadContacts.fulfilled,(function(){return!1})),Object(m.a)(y,_.loadContacts.rejected,(function(){return!1})),y)),z=Object(p.c)({items:U,filter:L,load:F}),S=n(56);C.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var E,I,W,R=function(e){C.a.defaults.headers.common.Authorization="Bearer ".concat(e)},T=function(){C.a.defaults.headers.common.Authorization=""},P=Object(d.c)("loginUser",function(){var e=Object(x.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/login",t);case 3:return n=e.sent,R(n.data.token),e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("error state: ",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),q=Object(d.c)("registrationUser",function(){var e=Object(x.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/signup",t);case 3:return n=e.sent,R(n.data.token),e.abrupt("return",n.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("Registration response error",e.t0.message),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),B=Object(d.c)("getCurrentUser",function(){var e=Object(x.a)(v.a.mark((function e(t,n){var a,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=n.getState(),r=a.auth.token,console.log(r),null!==r){e.next=6;break}return e.abrupt("return",n.rejectWithValue());case 6:return R(r),e.prev=7,e.next=10,C.a.get("/users/current");case 10:return c=e.sent,console.log("res currentUser: ",c),e.abrupt("return",c.data);case 15:throw e.prev=15,e.t0=e.catch(7),e.t0;case 18:e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(0),e.t1;case 23:case"end":return e.stop()}}),e,null,[[0,20],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}()),V={loginUser:P,registrationUser:q,logOutUser:Object(d.c)("logoutUser",Object(x.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("/users/logout");case 3:T(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),getCurrentUser:B},A={name:"",email:""},D=Object(d.d)(A,(E={},Object(m.a)(E,V.loginUser.fulfilled,(function(e,t){var n=t.payload;return Object(S.a)({},n.user)})),Object(m.a)(E,V.registrationUser.fulfilled,(function(e,t){var n=t.payload;return Object(S.a)({},n.user)})),Object(m.a)(E,V.getCurrentUser.fulfilled,(function(e,t){var n=t.payload;return console.log("payloadCurrent: ",n),Object(S.a)({},n)})),Object(m.a)(E,V.loginUser.rejected,(function(e,t){return e})),Object(m.a)(E,V.logOutUser.fulfilled,(function(e,t){return A})),E)),H=Object(d.d)(null,(I={},Object(m.a)(I,V.loginUser.fulfilled,(function(e,t){return t.payload.token})),Object(m.a)(I,V.registrationUser.fulfilled,(function(e,t){return t.payload.token})),Object(m.a)(I,V.logOutUser.fulfilled,(function(e,t){return null})),I)),M=Object(d.d)(!1,(W={},Object(m.a)(W,V.loginUser.fulfilled,(function(e,t){return!0})),Object(m.a)(W,V.loginUser.rejected,(function(e,t){return!1})),Object(m.a)(W,V.registrationUser.fulfilled,(function(e,t){return!0})),Object(m.a)(W,V.registrationUser.rejected,(function(e,t){return!1})),Object(m.a)(W,V.logOutUser.fulfilled,(function(e,t){return!1})),Object(m.a)(W,V.getCurrentUser.fulfilled,(function(e,t){return!0})),W)),G=Object(p.c)({user:D,token:H,isLoggedIn:M}),J=[].concat(Object(u.a)(Object(d.e)({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})),[h.a]),K={key:"auth",storage:f.a,whitelist:["token"]},Z=Object(d.a)({reducer:{contacts:z,auth:Object(j.g)(K,G)},devTools:!1,middleware:J}),Q=Object(j.h)(Z),X=n(79),Y=(n(123),n(15)),$={getIsLoggenIn:function(e){return e.auth.isLoggedIn},getLogin:function(e){return e.auth.user.name}},ee=n(169),te=n(174),ne=n(175),ae=n(186),re=n(184),ce=n(173),oe=(n(124),Object(ee.a)((function(e){return{root:{display:"flex",alignItems:"baseline","& :nth-child(n)":{margin:e.spacing(0,.5)}}}})));function ie(){var e=Object(l.d)($.getLogin),t=Object(l.c)(),n=oe();return Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsxs)(ae.a,{children:[e[0]," ",e[1]]}),Object(a.jsx)(ce.a,{display:"block",children:e}),Object(a.jsx)(re.a,{onClick:function(){t(V.logOutUser())},size:"small",variant:"contained",children:"Exit"})]})}var se=n(47),le=n.n(se),ue=Object(ee.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function de(){var e=ue(),t=Object(Y.f)().url,n=Object(l.d)($.getIsLoggenIn);return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(te.a,{position:"static",children:Object(a.jsxs)(ne.a,{children:[Object(a.jsxs)(ce.a,{variant:"button",className:e.title,children:[Object(a.jsx)(s.b,{className:le.a.navLink,to:"".concat(t),children:"Home"}),Object(a.jsx)(s.b,{className:le.a.navLink,to:"".concat(t,"contacts"),children:"Contacts"})]}),n?Object(a.jsx)("div",{children:Object(a.jsx)(ie,{})}):Object(a.jsxs)(ce.a,{align:"right",variant:"button",className:e.title,children:[Object(a.jsx)(s.b,{className:le.a.navLink,to:"".concat(t,"login"),children:"Login"}),Object(a.jsx)(s.b,{className:le.a.navLink,to:"".concat(t,"registration"),children:"Registration"})]})]})})})}var je=n(22),be=function(e){return e.contacts.items},fe=function(e){var t=e.contacts,n=t.items,a=t.filter.toLowerCase();return n.filter((function(e){return e.name.toLowerCase().includes(a)}))},Oe=n(83),he=n.n(Oe),me=n(183),pe=n(187),ge=Object(ee.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1,0,1),width:"35ch"}},form:{width:"100%"},btn:{width:"20ch",margin:e.spacing(3,0,2)}}}));var ve=function(){var e=ge(),t=Object(r.useState)(""),n=Object(je.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(""),s=Object(je.a)(i,2),u=s[0],d=s[1],j=Object(l.c)(),b=Object(l.d)(be),f=function(){o(""),d("")},O=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"name":o(a);break;case"number":d(a);break;default:return}};return Object(a.jsx)("form",{className:he.a.form,onSubmit:function(e){e.preventDefault(),function(e){var t=e.toLowerCase();if(b.find((function(e){return e.name.toLowerCase()===t})))return window.alert("".concat(e," is alredy in contacts")),!0}(c)||(j(_.addContacts({name:c,number:u})),f())},children:Object(a.jsxs)(pe.a,{className:e.root,children:[Object(a.jsx)(me.a,{name:"name",onChange:O,id:"name",label:"Name",value:c,variant:"outlined",placeholder:"Enter contact Name",size:"small"}),Object(a.jsx)(me.a,{name:"number",onChange:O,id:"number",label:"Number",value:u,variant:"outlined",placeholder:"Enter contact Number",size:"small"}),Object(a.jsx)(re.a,{type:"submit",className:e.btn,size:"small",fullWidth:!0,variant:"outlined",color:"primary",children:"Add Contact"})]})})};var xe=Object(l.b)((function(e){return{value:e.contacts.filter}}),(function(e){return{onChange:function(t){return e(N.changeFilter(t.target.value))}}}))((function(e){var t=e.onChange,n=e.value;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(me.a,{name:"filter",onChange:t,id:"filter",label:"Find contacts",value:n,variant:"outlined",placeholder:"Enter contact filter",size:"small"})})})),we=(n(129),n(131)),Ce=n(177),ke=n(181),ye=n(180),_e=n(176),Ne=n(178),Ue=n(179),Le=[{id:"name",label:"Name",minWidth:100},{id:"number",label:"Number",minWidth:200},{id:"btn",label:"Reg",minWidth:70,align:"center"}],Fe=Object(ee.a)({root:{width:"100%"},container:{maxHeight:440}});var ze=function(){var e=Object(l.c)(),t=Object(l.d)(fe),n=Fe(),c=Object(r.useState)(0),o=Object(je.a)(c,2),i=o[0],s=(o[1],Object(r.useState)(10)),u=Object(je.a)(s,2),d=u[0];return u[1],Object(a.jsx)(we.a,{className:n.root,children:Object(a.jsx)(_e.a,{className:n.container,children:Object(a.jsxs)(Ce.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(a.jsx)(Ne.a,{children:Object(a.jsx)(Ue.a,{children:Le.map((function(e){return Object(a.jsx)(ye.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(a.jsx)(ke.a,{children:t.slice(i*d,i*d+d).map((function(t){return Object(a.jsx)(Ue.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Le.map((function(n){var r=t[n.id];return Object(a.jsx)(ye.a,{align:n.align,children:null!==r&&void 0!==r?r:Object(a.jsx)(re.a,{color:"secondary",component:"button",variant:"outlined",size:"small",onClick:function(){return e(_.deleteContacts(t.id))},children:"Del"})},n.id)}))},t.id)}))})]})})})},Se=n(42),Ee=n.n(Se);var Ie=function(){var e=Object(l.c)(),t=Object(l.d)($.getIsLoggenIn);return Object(r.useEffect)((function(){e(_.loadContacts())}),[e]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:Ee.a.container,children:[Object(a.jsxs)("div",{className:Ee.a.formContainer,children:[Object(a.jsx)("p",{className:Ee.a.title,children:"Phonebook"}),Object(a.jsx)(ve,{})]}),Object(a.jsxs)("div",{className:Ee.a.contactsContainer,children:[Object(a.jsx)("p",{className:Ee.a.title,children:"Contacts"}),Object(a.jsx)(xe,{}),t&&Object(a.jsx)(ze,{})]})]})})},We=n(182);function Re(e){var t=e.children;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(We.a,{maxWidth:"md",children:t})})}var Te={container:{minHeight:"calc(100vh - 50px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontWeight:500,fontSize:48,textAlign:"center"}},Pe=function(){return Object(a.jsx)("div",{style:Te.container,children:Object(a.jsxs)("h1",{style:Te.title,children:["\u0412\u0456\u0442\u0430\u043d\u043d\u044f \u0443 \u043a\u043d\u0438\u0437\u0456 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u0438\u0445 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0456\u0432 ",":)"]})})},qe=Object(ee.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1,0,1),width:"35ch"}},form:{width:"100%"},btn:{width:"20ch",margin:e.spacing(3,0,2)}}}));function Be(){var e=qe(),t=Object(r.useState)("edc@ukr.net"),n=Object(je.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)("qwer4321"),s=Object(je.a)(i,2),u=s[0],d=s[1],j=Object(l.c)(),b=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"email":o(a);break;case"password":d(a);break;default:return}},f=function(){o(""),d("")};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Login to system"}),Object(a.jsx)("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),j(V.loginUser({email:c,password:u})),f()},children:Object(a.jsxs)(pe.a,{className:e.root,children:[Object(a.jsx)(me.a,{name:"email",onChange:b,required:!0,id:"email",label:"E-mail",value:c,variant:"outlined",placeholder:"Enter your Email",size:"small",type:"email"}),Object(a.jsx)(me.a,{name:"password",onChange:b,required:!0,id:"password",label:"Password",value:u,variant:"outlined",placeholder:"Enter your Password",type:"password",size:"small"}),Object(a.jsx)(re.a,{type:"submit",className:e.btn,size:"small",fullWidth:!0,variant:"outlined",color:"primary",children:"Login"})]})})]})}var Ve=function(){return Object(a.jsx)(Be,{})},Ae=Object(ee.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1,0,1),width:"35ch"}},form:{width:"100%"},btn:{width:"20ch",margin:e.spacing(3,0,2)}}}));function De(){var e=Ae(),t=Object(r.useState)(""),n=Object(je.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(""),s=Object(je.a)(i,2),u=s[0],d=s[1],j=Object(r.useState)(""),b=Object(je.a)(j,2),f=b[0],O=b[1],h=Object(l.c)(),m=function(e){var t=e.currentTarget,n=t.name,a=t.value;switch(n){case"login":o(a);break;case"password":d(a);break;case"email":O(a);break;default:return}},p=function(){d(""),o(""),O("")};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Registration to System Phonebook"}),Object(a.jsx)("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault();var t={name:c,password:u,email:f};h(V.registrationUser(t)),p()},children:Object(a.jsxs)(pe.a,{className:e.root,children:[Object(a.jsx)(me.a,{name:"login",onChange:m,required:!0,id:"login",label:"Login",value:c,variant:"outlined",placeholder:"Enter your Login",size:"small"}),Object(a.jsx)(me.a,{name:"email",onChange:m,required:!0,id:"email",label:"E-mail",value:f,variant:"outlined",placeholder:"Enter your E-mail",size:"small"}),Object(a.jsx)(me.a,{name:"password",onChange:m,required:!0,id:"password",label:"Password",value:u,variant:"outlined",placeholder:"Enter your Password",type:"password",size:"small"}),Object(a.jsx)(re.a,{type:"submit",className:e.btn,size:"small",fullWidth:!0,variant:"outlined",color:"primary",children:"Registration"})]})})]})}var He=function(){return Object(a.jsx)(De,{})};var Me=function(){var e=Object(Y.f)().url,t=Object(l.c)();return Object(r.useEffect)((function(){return t(V.getCurrentUser()),function(){}}),[t]),Object(a.jsxs)(Re,{children:[Object(a.jsx)(de,{}),Object(a.jsxs)(Y.c,{children:[Object(a.jsx)(Y.a,{exact:!0,path:"".concat(e),component:Pe}),Object(a.jsx)(Y.a,{path:"".concat(e,"contacts"),component:Ie}),Object(a.jsx)(Y.a,{path:"".concat(e,"login"),component:Ve}),Object(a.jsx)(Y.a,{path:"".concat(e,"Registration"),component:He})]})]})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,188)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(l.a,{store:Z,children:Object(a.jsx)(X.a,{loading:null,persistor:Q,children:Object(a.jsx)(s.a,{children:Object(a.jsx)(Me,{})})})})}),document.getElementById("root")),Ge()},42:function(e,t,n){e.exports={container:"ContactView_container__3wWv3",title:"ContactView_title__2b4rd",formContainer:"ContactView_formContainer__1Sz_m",contactsContainer:"ContactView_contactsContainer__2yUf3"}},47:function(e,t,n){e.exports={navLink:"AppBar_navLink__3FFMf"}},83:function(e,t,n){e.exports={form:"form_form__2ozBI",input:"form_input__1qKkF"}}},[[130,1,2]]]);
//# sourceMappingURL=main.cfb066da.chunk.js.map